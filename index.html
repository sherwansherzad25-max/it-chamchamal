<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="KRUnPZNhg3NP-_UojaPqUmyg0Nl_naNcoGN3c3upo-4" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ئایتی IT">

    <meta name="description" content="سایتی  بەشی IT پەیمانگای تەکنیکی چەمچەماڵ">
    <meta name="keywords" content="IT Chamchamal, بەشی ئایتی چەمچەماڵ">
    <meta name="author" content="Sherwan Sherzad">
    
    <meta property="og:title" content="بەشی IT | پەیمانگای تەکنیکی چەمچەماڵ">
    <meta property="og:url" content="https://sherwansherzad25-max.github.io/it-chamchamal/">
    <title>بەشی IT پەیمانگای تەکنیکی چەمچەماڵ</title>

    <link rel="icon" type="image/png" sizes="192x192" href="it-icon-final-192.png?v=5">
    <link rel="apple-touch-icon" sizes="180x180" href="it-icon-final-180.png?v=5">
    <link rel="manifest" href="manifest.json?v=5">
    <meta name="theme-color" content="#1e3a8a">

    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@800&display=swap" rel="stylesheet">

    <style>
        :root {
        
            --primary: #1e3a8a;      
            --secondary: #059669;  
            --accent: #dc2626;       
            --background: #f1f5f9;  
            --white: #ffffff;
            --text-color: #1e293b;
            --table-border: #cbd5e1;
            --sidebar-bg: #24682f;    
            --sidebar-text: #ffffff;
            --font-main: 'Vazirmatn', sans-serif;
        }

        body.dark-mode {
            --background: #0f172a;   
            --white: #1e293b;
            --primary: #172554;      
            --text-color: #f8fafc;
            --table-border: #334155;
            --sidebar-bg: #064e3b;    
            --secondary: #10b981;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--background);
            margin: 0; padding: 0; color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden;
            direction: rtl;
            text-align: right;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/6/63/Chamchamal_city.jpg'); 
            background-size: cover; background-position: center; background-attachment: fixed;
            -webkit-tap-highlight-color: transparent;
        }


        body.sidebar-open {
            overflow: hidden !important; 
        }

        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(241, 245, 249, 0.94); z-index: -1; transition: 0.3s;
            backdrop-filter: blur(4px);
        }
        body.dark-mode::before { background: rgba(15, 23, 42, 0.94); }


        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #059669; 
            z-index: 9999; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            transition: opacity 0.5s ease-out, visibility 0.5s;
        }
        #loading-screen.hidden { opacity: 0; visibility: hidden; }
        
        .loader-logo {
            width: 70%; 
            max-width: 350px;
            height: auto;
            border-radius: 20px;

            filter: drop-shadow(0 0 10px rgba(0,0,0,0.2));
            animation: pulse 1.5s infinite;
        }
        .loader-text {
            color: white; margin-top: 20px; font-weight: bold; font-size: 1.4rem;
            font-family: 'Changa', sans-serif; letter-spacing: 1px;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }


        body.lang-en { direction: ltr; text-align: left; }
        body.lang-en .fixed-menu-btn { right: auto; left: 15px; } 
        body.lang-en .sidebar { right: auto; left: 0; }
        body.lang-en .sidebar .closebtn { right: auto; left: 25px; }

        .fixed-menu-btn {
            position: fixed; top: 15px; right: 15px; z-index: 3000;
            background: rgba(5, 150, 105, 0.9); backdrop-filter: blur(5px);
            padding: 8px 12px; border-radius: 12px; color: white; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: flex; flex-direction: column; align-items: center;
            border: 1px solid rgba(255,255,255,0.3); transition: transform 0.2s;
        }
        .fixed-menu-btn:active { transform: scale(0.95); }
        .menu-icon-text { font-size: 11px; font-weight: bold; margin-top: -2px; }

        header {
           
            background-color: var(--primary);
            padding: 20px 15px; box-shadow: 0 4px 20px rgba(30, 58, 138, 0.4);
            position: relative; display: flex; align-items: center; justify-content: space-between; 
            min-height: 110px; border-bottom-left-radius: 30px; border-bottom-right-radius: 30px;
            overflow: hidden; 
        }

     
        .header-watermark, .footer-watermark {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('1.jfif');
            background-size: 150px 150px; 
            background-repeat: repeat;
            background-position: center;
            opacity: 0.08; 
            z-index: 0; pointer-events: none;
            filter: grayscale(100%); 
        }

        .header-titles { flex-grow: 1; text-align: center; padding-right: 10px; position: relative; z-index: 2; }
        
        .moving-header {
            color: #10b981 !important; 
            margin: 0; font-size: 1.6rem;
            display: inline-block; 
            animation: headerJump 3s infinite ease-in-out;
            font-weight: 900;
            text-shadow: 
                -2px -2px 0 #000,  
                 2px -2px 0 #000,
                -2px  2px 0 #000,
                 2px  2px 0 #000,
                 3px 3px 6px rgba(0,0,0,0.6);
        }

        header h2 { 
            color: #10b981 !important; 
            font-size: 1.2rem; 
            margin-top: 8px; 
            font-weight: 800;
            position: relative;
            z-index: 2;
            text-shadow: 
                -1.5px -1.5px 0 #000,  
                 1.5px -1.5px 0 #000,
                -1.5px  1.5px 0 #000,
                 1.5px  1.5px 0 #000,
                 2px 2px 5px rgba(0,0,0,0.5);
        }
        @keyframes headerJump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

        .header-left-controls { display: flex; flex-direction: column; gap: 8px; align-items: center; z-index: 100; position: relative; }
        #liveClock {
            color: white; font-size: 0.85rem; font-weight: 600; font-family: monospace;
            background: rgba(0, 0, 0, 0.3); padding: 4px 12px; border-radius: 20px; 
            border: 1px solid rgba(255, 255, 255, 0.2); direction: ltr !important; 
        }
        .theme-toggle {
            background: rgba(255,255,255,0.15); color: white; border: 1px solid rgba(255,255,255,0.3);
            padding: 4px 12px; border-radius: 50px; cursor: pointer; font-family: var(--font-main); font-weight: bold; font-size: 0.8rem;
            backdrop-filter: blur(4px);
        }

     
        .sticky-news-wrapper {
            position: relative; top: 0; z-index: 2000; margin: 0;
            background: transparent; padding: 10px 15px;
        }
        #news-list { display: inline-block; white-space: nowrap; animation: tickerMove 200s linear infinite !important; }
        body.dark-mode #news-list { color: #fcd34d !important; text-shadow: 0 0 2px rgba(0,0,0,0.5); }
        @keyframes tickerMove { 0% { transform: translateX(0%); } 100% { transform: translateX(100%); } }

       
        .notif-btn {
            background: #f59e0b; color: #fff; border: none; padding: 4px 10px;
            border-radius: 8px; cursor: pointer; font-size: 1rem; margin-right: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            animation: pulse-btn 2s infinite;
        }
        @keyframes pulse-btn { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }


.sidebar {
    height: 100%; 
    width: 0;
    position: fixed;
    z-index: 4000;
    top: 0;
    right: 0;
    bottom: 0;
    
    background-color: var(--sidebar-bg);
    overflow-x: hidden;
    overflow-y: auto; 
    
    transition: 0.4s;
    padding-top: 40px;
    padding-bottom: 100px; 
    
    box-sizing: border-box; 
    
    box-shadow: -5px 0 25px rgba(0,0,0,0.2);
    border-left: 1px solid rgba(255,255,255,0.1);
}
        
  
        .flag-container {
            width: 120px; height: 75px; margin: 15px auto 20px auto; 
            position: relative; z-index: 10; perspective: 1000px;
        }
        .flag-pole {
            position: absolute; left: -8px; top: -10px; width: 8px; height: 140%; 
            background: linear-gradient(90deg, #444, #111, #000); border-radius: 4px; z-index: 5; 
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
        }
        .real-flag {
            width: 100%; height: 100%; 
            background-image: url('1.jfif'); background-size: cover; background-position: center; background-color: white;
            position: relative; transform-origin: left center;
            clip-path: polygon(
                0% 0%, 10% 3%, 20% 0%, 30% 3%, 40% 0%, 50% 3%, 60% 0%, 70% 3%, 80% 0%, 90% 3%, 100% 0%, 
                100% 100%, 90% 97%, 80% 100%, 70% 97%, 60% 100%, 50% 97%, 40% 100%, 30% 97%, 20% 100%, 10% 97%, 0% 100%
            );
            animation: wave-flag 4s ease-in-out infinite alternate;
        }
        .real-flag::before {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(110deg, rgba(255,255,255,0) 20%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 80%);
            background-size: 200% 100%; mix-blend-mode: overlay; pointer-events: none;
            animation: wave-shine 2.5s infinite linear;
        }
        @keyframes wave-flag { 0% { transform: rotateY(0deg); } 50% { transform: rotateY(-12deg) skewY(2deg); } 100% { transform: rotateY(0deg); } }
        @keyframes wave-shine { 0% { background-position: -150% 0; } 100% { background-position: 150% 0; } }

        .sidebar a {
            padding: 15px 25px; text-decoration: none; font-size: 1.1rem; color: white; 
            display: block; transition: 0.3s; border-bottom: 1px solid rgba(255,255,255,0.1); font-weight: 600;
        }
        .sidebar a:hover { background-color: rgba(0, 0, 0, 0.1); padding-right: 35px; }
        .sidebar .closebtn { position: absolute; top: 5px; right: 20px; font-size: 36px; margin-left: 50px; color: white; }
        .sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 3500; display: none; backdrop-filter: blur(2px); }

     
        .main-container { max-width: 1000px; margin: -20px auto 50px auto; padding: 0 15px; position: relative; z-index: 10; }
        .tabs { display: none; }
        .semester-content {
            display: none; background: var(--white); padding: 25px; border-radius: 25px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--table-border);
        }
        .semester-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

  
        .tab-btn {
            padding: 12px 20px; border: none; border-radius: 16px; font-size: 1rem; font-weight: 700; cursor: pointer;
            transition: all 0.3s; color: var(--text-color); background-color: var(--white); 
            box-shadow: 0 4px 6px rgba(0,0,0,0.05); font-family: var(--font-main);
            border: 1px solid transparent;
        }
        .tab-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.08); border-color: var(--secondary); }
        .tab-btn.active { 
            background-color: var(--secondary); color: white; 
            transform: scale(1.05); box-shadow: 0 8px 20px rgba(5, 150, 105, 0.3); 
        }


        .active-btn {
            border: 3px solid #1e3a8a !important;
            box-shadow: 0 0 15px rgba(30, 58, 138, 0.4) !important;
            transform: scale(1.1) !important;
            z-index: 10;
            font-weight: 900 !important;
        }

  
        body.dark-mode .active-btn {
            border: 3px solid #ffffff !important; 
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5) !important;
        }

     
        .scrolling-container { 
            height: 450px; overflow: hidden; position: relative; border-radius: 30px;
            background: linear-gradient(135deg, #059669 0%, #10b981 100%); 
            box-shadow: 0 15px 40px rgba(5, 150, 105, 0.25);
        }
        .scrolling-content { display: block; width: 100%; padding-top: 50px; animation: continuousScroll 45s linear infinite; }
        .scrolling-container:hover .scrolling-content { animation-play-state: paused; }
        
        @media screen and (max-width: 768px) {
            .scrolling-container { height: 580px; }
            .scrolling-content { animation-duration: 60s; padding-bottom: 50px; }
            .scroll-item h2 { font-size: 1.6rem !important; }
            .scroll-item p { font-size: 1.1rem !important; }
        }

        .scroll-item { text-align: center; width: 100%; box-sizing: border-box; padding: 0 20px; margin-bottom: 100px; }
        @keyframes continuousScroll { 0% { transform: translateY(0); } 100% { transform: translateY(-50%); } }
        .highlight-menu-word { color: #ffffff; background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 6px; border: 1px dashed rgba(255,255,255,0.5); }

    
        .gpa-info-box {
            background: #dcfce7; color: #166534; padding: 12px; border-radius: 12px; margin-bottom: 20px; font-weight: bold; border: 1px solid #10b981; text-align: center;
        }
        body.dark-mode .gpa-info-box { background: #064e3b; color: #d1fae5; border-color: #059669; }

        .grade-item { margin-bottom: 15px; }
        .accordion {
            background-color: var(--white); color: var(--text-color); cursor: pointer; padding: 18px 20px; width: 100%; border: 1px solid var(--table-border); 
            text-align: right; outline: none; font-size: 1rem; transition: 0.3s; border-radius: 16px; 
            font-weight: 700; box-shadow: 0 2px 8px rgba(0,0,0,0.02); display: flex; justify-content: space-between; align-items: center;
        }
        .active-accordion, .accordion:hover { background-color: #f0fdf4; border-color: var(--secondary); }
        body.dark-mode .active-accordion { background-color: #1e293b; }
        .panel { 
            padding: 0 20px; background-color: var(--white); max-height: 0; overflow: hidden; 
            transition: max-height 0.3s ease-out; margin-bottom: 10px; border-radius: 0 0 16px 16px;
            border: 1px solid var(--table-border); border-top: none;
        }
        .gpa-input-row { display: flex; justify-content: space-between; margin: 12px 0; align-items: center; border-bottom: 1px dashed #e2e8f0; padding-bottom: 8px; }
        .gpa-input-row input { 
            width: 70px; padding: 8px; border-radius: 10px; border: 1px solid #cbd5e1; text-align: center; 
            background: var(--background); color: var(--text-color); font-weight: bold; font-family: monospace;
        }
        .gpa-input-row input:focus { border-color: var(--secondary); outline: none; box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1); }
        .subject-badge { color: white; padding: 6px 14px; border-radius: 50px; font-size: 0.9rem; font-weight: 600; display: inline-block; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
     
        .clear-btns-container { display: flex; justify-content: center; margin-top: 10px; }
        .btn-clear-sub { background: #fee2e2; color: #dc2626; border: 1px solid #fecaca; padding: 6px 12px; border-radius: 8px; font-size: 0.85rem; cursor: pointer; }
        .btn-clear-sem { background: #dc2626; color: white; border: none; padding: 12px 20px; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 20px; width: 100%; box-shadow: 0 4px 10px rgba(220, 38, 38, 0.3); }

    
        .countdown-box {
            background: linear-gradient(135deg, #059669, #047857); /* Green Gradient */
            color: white; padding: 25px 15px; border-radius: 24px; text-align: center;
            margin: 20px auto; box-shadow: 0 10px 30px rgba(5, 150, 105, 0.25); max-width: 100%; border: 1px solid rgba(255,255,255,0.1);
        }
        .timer-row { display: flex; justify-content: center; gap: 12px; direction: ltr; margin-top: 20px; flex-wrap: nowrap; }
        .timer-unit { display: flex; flex-direction: column; align-items: center; min-width: 65px; }
        .timer-box {
            background: rgba(255, 255, 255, 0.2); padding: 12px 0; border-radius: 16px; font-size: 1.5rem; font-weight: 800; font-family: monospace;
            width: 100%; box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); border: 1px solid rgba(255,255,255,0.3); backdrop-filter: blur(5px);
        }
        .timer-label { font-size: 0.8rem; font-weight: 600; margin-top: 8px; color: #d1fae5; letter-spacing: 0.5px; }

      
        .shift-selection { display: flex; gap: 15px; justify-content: center; margin-bottom: 25px; flex-wrap: wrap; }
        .shift-btn { 
            padding: 15px 35px; border: none; border-radius: 20px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: all 0.3s; 
            font-family: var(--font-main); color: white; box-shadow: 0 8px 20px rgba(0,0,0,0.1); 
        }
        .shift-btn.morning { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .shift-btn.evening { background: linear-gradient(135deg, #1e3a8a, #1e40af); }
        .shift-btn:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.15); }
        .shift-btn.active { transform: scale(1.05); border: 2px solid white; box-shadow: 0 0 0 4px rgba(0,0,0,0.05); }
        
        .sem-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .sem-card { 
            padding: 30px; border-radius: 24px; color: white; text-align: center; font-size: 1.2rem; font-weight: bold; 
            cursor: pointer; transition: 0.3s; box-shadow: 0 10px 20px rgba(0,0,0,0.05); position: relative; overflow: hidden;
        }
        .sem-card::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.1)); }
        .sem-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.12); }
        
        .table-container { overflow-x: auto; width: 100%; border-radius: 16px; box-shadow: 0 5px 15px rgba(0,0,0,0.03); }
        table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 0; min-width: 400px; }
        th, td { padding: 16px 12px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--text-color); font-size: 0.95rem; }
        th { background-color: var(--primary); color: white; font-weight: 600; letter-spacing: 0.5px; }
        tr:last-child td { border-bottom: none; }
        tr:nth-child(even) { background-color: rgba(0,0,0,0.01); }
        body.dark-mode th { background-color: #1e293b; }
        
        .download-btn { 
            display: inline-block; padding: 8px 16px; background-color: var(--secondary); 
            color: white !important; text-decoration: none; border-radius: 12px; 
            font-size: 0.85rem; transition: 0.2s; white-space: nowrap; font-weight: 600;
            box-shadow: 0 2px 5px rgba(5, 150, 105, 0.2);
        }
        .old-btn { background-color: #f59e0b; box-shadow: 0 2px 5px rgba(245, 158, 11, 0.2); }
        .download-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(0,0,0,0.15); filter: brightness(1.05); }

       
        footer { 
            text-align: center; padding: 30px 15px; background-color: var(--primary); color: white; 
            margin-top: 60px; border-radius: 30px 30px 0 0; position: relative; overflow: hidden;
        }
        footer > * { position: relative; z-index: 2; } 
        
        .rainbow-name { 
            display: inline-block; font-size: 1.4rem; font-weight: 800; 
            background: linear-gradient(to right, #34d399, #60a5fa, #f472b6, #fbbf24, #34d399); 
            background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
            animation: gradient-animation 4s linear infinite; margin: 8px 0;
        }
        @keyframes gradient-animation { 0% { background-position: 0% center; } 100% { background-position: 200% center; } }
        .moving-text { margin-top: 10px; font-size: 0.95rem; font-weight: 600; display: block; animation: moveText 3s infinite alternate ease-in-out; }
        @keyframes moveText { from { transform: scale(1); color: #6ee7b7; } to { transform: scale(1.03); color: #fcd34d; } }

       
        body.dark-mode .semester-content,
        body.dark-mode .panel {
            background-color: #000000 !important;
            color: #ffffff !important;
            border-color: #333 !important;
        }
        body.dark-mode table th {
            background-color: #111111 !important; 
            color: #ffffff !important;
        }
        body.dark-mode table td {
            color: #ffffff !important;
            border-bottom: 1px solid #333 !important;
        }
        body.dark-mode .scroll-item h2 {
            color: #ffffff !important;
            text-shadow: none !important;
        }
        body.dark-mode .scroll-item p {
            color: #e2e8f0 !important;
        }
    </style>
</head>
<body>

<div id="loading-screen">
    <img src="it-icon-final-192.png" alt="Logo" class="loader-logo">
    <div class="loader-text">IT Chamchamal</div>
</div>

<div id="sidebarOverlay" class="sidebar-overlay" onclick="closeNav()"></div>
<div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
    <div style="text-align: center; padding: 25px 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
        <div class="flag-container">
            <div class="flag-pole"></div>
            <div class="real-flag"></div>
        </div>
        <h2 style="margin:0; color:white; font-weight:800; font-size:1.4rem;" id="lang-dept">بەشی ئایتی</h2>
    </div>
    <a href="#" onclick="showSection('home-tab'); closeNav()"><span id="lang-home">🏠 سەرەکی</span></a>
    <a href="#" onclick="showSection('schedule-tab'); closeNav()"><span id="lang-schedule">📅 خشتەی هەفتانە</span></a>
    <a href="#" onclick="showSection('semesters-tab'); closeNav()"><span id="lang-semesters">📚 سمستەرەکان</span></a>
    <a href="#" onclick="showSection('exam-tab'); closeNav(); checkExams();"><span id="lang-menu-exam">⏳ کاتی تاقیکردنەوە</span></a>
    <a href="#" onclick="showSection('gpa-tab'); closeNav()"><span id="lang-menu-gpa">🧮 هەژمارکردنی نمرە</span></a>
    <a href="#" onclick="showSection('about-tab'); closeNav()"><span id="lang-about">ℹ️ دەربارە</span></a>
    <a href="#" onclick="toggleLangMenu()" style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1);">
        <span>🌐 <span id="lang-setting">زمان</span></span>
        <span id="lang-arrow" style="font-size: 0.8rem; transition: transform 0.3s;">▼</span>
    </a>
    <div id="lang-options" style="display: none; background: rgba(0,0,0,0.1); padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); text-align: center;">
        <div style="display: flex; justify-content: center; gap: 10px;">
            <button onclick="toggleLanguage('ku')" style="padding: 8px 20px; border-radius: 12px; border: none; background: white; cursor: pointer; font-weight: bold;">کوردی</button>
            <button onclick="toggleLanguage('en')" style="padding: 8px 20px; border-radius: 12px; border: none; background: white; cursor: pointer; font-weight: bold;">English</button>
        </div>
    </div>
    <a href="https://t.me/sherwan25" target="_blank" style="color: #fbbf24;"><span id="lang-contact">📞 پەیوەندی (Telegram)</span></a>
</div>

<div class="fixed-menu-btn" onclick="openNav()">
    <span style="font-size: 24px; line-height: 1;">☰</span>
    <span class="menu-icon-text" id="lang-menu">لیست</span>
</div>

<header>
    <div class="header-watermark"></div>
    <div style="width: 80px;"></div>
    <div class="header-titles">
        <h1 class="moving-header" id="lang-institute">پەیمانگای تەکنیکی چەمچەماڵ</h1>
        <h2 id="lang-dept-sub">بەشی تەکنەلۆژیای زانیاری (IT)</h2>
    </div>
    <div class="header-left-controls">
        <div id="liveClock">00:00:00 PM</div>
        <button class="theme-toggle" onclick="cycleTheme()" id="themeBtn">مۆدی شەو 🌙</button>
    </div>
</header>

<div class="main-container">
    <div class="sticky-news-wrapper">
        <div style="display: flex; flex-direction: column; align-items: flex-start; direction: rtl; width: 100%;">
            <div style="display: flex; align-items: center; margin-bottom: 5px;">
                <div id="lang-alert" style="background: var(--accent); color: white; padding: 4px 15px; border-radius: 50px; font-weight: bold; font-size: 0.85rem; box-shadow: 0 2px 5px rgba(239, 68, 68, 0.3); margin-right: 5px;">🚨 ئاگاداری گرنگ</div>
                <button class="notif-btn" onclick="requestNotifyPermission()" title="پێکردنی ئاگادارکردنەوە">🔔</button>
            </div>
            <div style="background: rgba(255,255,255,0.9); border: 2px solid var(--accent); border-radius: 12px; overflow: hidden; position: relative; box-shadow: 0 4px 15px rgba(0,0,0,0.05); padding: 10px 0; width: 100%; height: 25px; backdrop-filter: blur(5px);">
                <div id="news-list" style="position: absolute; white-space: nowrap; right: 0; font-weight: bold; color: var(--text-color); font-size: 0.95rem; will-change: transform;">چاوەڕێ بکە... دوایین هەواڵەکان بار دەکرێن...</div>
            </div>
        </div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="showTab(event, 'home-tab')"><span id="lang-tab-home">🏠 سەرەکی</span></button>
        <button class="tab-btn" onclick="showTab(event, 'schedule-tab')"><span id="lang-tab-schedule">📅 خشتەی هەفتانە</span></button>
        <button class="tab-btn" onclick="showTab(event, 'semesters-tab')"><span id="lang-tab-semesters">📚 سمستەرەکان</span></button>
        <button class="tab-btn" onclick="showTab(event, 'about-tab')"><span id="lang-tab-about">ℹ️ دەربارە</span></button>
    </div>

    <div id="home-tab" class="semester-content active" style="padding: 0; background: transparent; box-shadow: none; border: none;">
        <div class="scrolling-container">
            <div class="scrolling-content">
                <div class="scroll-item">
                    <h2 style="color: #fbbf24; font-size: 1.9rem; text-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; border-bottom: 2px dashed rgba(255,255,255,0.3); padding-bottom: 15px;">
                        بەخێربێن خوێندکارانی ئازیزی بەشی تەکنەلۆژیای زانیاری (IT)
                    </h2>
                    <p style="font-size: 1.3rem; line-height: 1.8; margin-bottom: 25px; color: #f0fdf4; font-weight: 500;">
                        ئەم وێبسایتە دروستکراوە بۆ ئەوەی تۆی خوێندکار لێی سوودمەند بیت و کارئاسانییەک بێت بۆ خوێندنی وانەکانی ڕۆژانەت بە كرتە كردن لەسەر <span class="highlight-menu-word">" لیست "</span> كە لە راستی بەشی سەرەوەی ویب سایتەكەدایە.
                    </p>
                    <div style="background: rgba(255,255,255,0.15); padding: 25px; border-radius: 20px; margin-bottom: 15px; text-align: right; direction: rtl; backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.1);">
                        <p style="font-size: 1.2rem; margin: 10px 0; color: #fff;">🔹 <b>بەشی سمستەرەکان:</b></p>
                        <p style="font-size: 1.1rem; margin: 5px 20px 15px 0; color: #e0f2fe;">١. بە کرتە کردن لەسەر مەلزەمەکان، هەموو مەلزەمەکانی وانەکەت دەست دەکەوێت.</p>
                        <p style="font-size: 1.1rem; margin: 5px 20px 15px 0; color: #e0f2fe;">٢. بە کرتە کردن لەسەر بەشی پرسیار، پرسیاری ساڵانی ڕابردووت دەست دەکەوێت.</p>
                        <p style="font-size: 1.1rem; margin: 5px 20px 15px 0; color: #e0f2fe;">٣. بە کرتە کردن لەسەر بەشی فێرکاری، دەتباتە ناو پلەی لیستی یوتیوب و فێرکاری ئەو بابەتە.</p>
                        
                        <p style="font-size: 1.2rem; margin: 15px 0 5px 0; color: #fff;">📅 <b>بەشی خشتەی هەفتانە:</b></p>
                        <p style="font-size: 1.1rem; margin: 5px 20px 0 0; color: #e0f2fe;">خشتەی وانەکانی ڕۆژانەی هەردوو دەوامی بەیانیان و ئێوارنی تێدایە بۆ هەردوو گرووپ.</p>
                        <p style="font-size: 1.1rem; margin-top: 15px; color: #d1fae5;">
                            <b>بەشی زمان:</b> دەتوانیت جگە لە زمانی كوردی زمانی ئینگلیزی هەڵبژێریت<br>
                            <b>بەشی كاتی تاقیكردنەوە:</b> دەتوانیت لیرەوە كاتی تاقیكردنەوەكان بزانیت<br>
                            <b>بەشی هەژماری نمرەكان:</b> دەتوانیت لیرە نمرەكان كۆبكەیتەوە
                        </p>
                    </div>
                    <h3 style="color: #6ee7b7; font-size: 1.6rem; margin-top: 25px; text-shadow: 0 2px 5px rgba(0,0,0,0.1);">بەهیوای سەرکەوتن بۆ هەموو خوێندکاران</h3>
                    <div style="margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.15); border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);">
                        <p style="font-size: 1.1rem; color: #ffffff; margin-bottom: 10px;">
                            سوپاس بۆ هەردوو خوێندکار <b style="color: #fbbf24;">(محمد اسماعیل)</b> و <b style="color: #fbbf24;">(محمد بێستون)</b>
                        </p>
                        <p style="font-size: 1rem; color: #a7f3d0; font-weight: bold;">کە هاوکار بوون لە دروستکردنی ئەم وێبسایتەدا</p>
                    </div>
                </div>
                <div class="scroll-item">
                     <h2 style="color: #fbbf24; font-size: 1.9rem; margin-bottom: 20px;">
                        بەخێربێن خوێندکارانی ئازیزی بەشی تەکنەلۆژیای زانیاری (IT)
                    </h2>
                     <p style="font-size: 1.3rem; line-height: 1.8; margin-bottom: 20px; color: #f0fdf4; font-weight: 500;">
                        ئەم وێبسایتە دروستکراوە بۆ ئەوەی تۆی خوێندکار لێی سوودمەند بیت...
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="exam-tab" class="semester-content">
        <h3 style="text-align: center; color: var(--primary); margin-bottom: 20px;" id="lang-exam-header">⏳ کاتی ماوە بۆ تاقیکردنەوەکان</h3>
        <div id="exams-container"></div>
    </div>

    <div id="gpa-tab" class="semester-content">
        <h3 style="text-align: center; color: var(--primary);" id="lang-gpa-header">🧮 هەژمارکردنی نمرەکان</h3>
        
        <div class="gpa-info-box">
            📌 تێبینی: نمرەکانت بە شێوەیەکی خۆکار لە ناو مۆبایلەکەتدا پاشەکەوت دەبن و بە داخستنی ئەپەکە یان نوێکردنەوەی سایتەکە ناسڕێنەوە.
        </div>

        <div style="display: flex; justify-content: center; margin-bottom: 25px;">
            <select id="gpa-sem-select" onchange="renderGrading()" style="padding: 12px 20px; border-radius: 12px; font-family: var(--font-main); font-size: 1rem; border: 2px solid var(--secondary); background: var(--background); color: var(--text-color); font-weight: bold; outline: none; cursor: pointer;">
                <option value="1">سمستەری ١</option>
                <option value="2">سمستەری ٢</option>
                <option value="3">سمستەری ٣</option>
                <option value="4">سمستەری ٤</option>
            </select>
        </div>
        <div id="grading-container"></div>
        
        <button class="btn-clear-sem" onclick="resetSemesterGrades()">🗑️ سڕینەوەی هەموو وانەکانی ئەم سمستەرە</button>
    </div>

    <div id="schedule-tab" class="semester-content">
        <h3 style="text-align:center;" id="lang-sched-header">📅 خشتەی هەفتانە (جەدۆل)</h3>
        <div class="shift-selection">
            <button class="shift-btn morning" onclick="selectShift('morning')"><span id="lang-morning">☀️ دەوامی بەیانیان</span></button>
            <button class="shift-btn evening active" onclick="selectShift('evening')"><span id="lang-evening">🌙 دەوامی ئێوارن</span></button>
        </div>
        <div style="display: flex; gap: 8px; justify-content: center; margin-bottom: 15px; flex-wrap: wrap;">
            <button id="btn-sem-1" class="tab-btn sem-btn" style="background:#3b82f6; color:white;" onclick="setSem(1)"><span id="lang-sem-btn1">سمستەری ١</span></button>
            <button id="btn-sem-2" class="tab-btn sem-btn" style="background:#10b981; color:white;" onclick="setSem(2)"><span id="lang-sem-btn2">سمستەری ٢</span></button>
            <button id="btn-sem-3" class="tab-btn sem-btn" style="background:#f59e0b; color:white;" onclick="setSem(3)"><span id="lang-sem-btn3">سمستەری ٣</span></button>
            <button id="btn-sem-4" class="tab-btn sem-btn" style="background:#8b5cf6; color:white;" onclick="setSem(4)"><span id="lang-sem-btn4">سمستەری ٤</span></button>
        </div>
        <div id="group-selection" style="display: none; gap: 15px; justify-content: center; margin-bottom: 25px;">
            <button id="btn-grp-A" class="tab-btn grp-btn" style="background:linear-gradient(135deg, #3b82f6, #2563eb); color:white;" onclick="selectGroup('A')">Group A 🔵</button>
            <button id="btn-grp-B" class="tab-btn grp-btn" style="background:linear-gradient(135deg, #10b981, #059669); color:white;" onclick="selectGroup('B')">Group B 🟢</button>
            <button id="btn-grp-C" class="tab-btn grp-btn" style="background:linear-gradient(135deg, #f59e0b, #d97706); color:white; display:none;" onclick="selectGroup('C')">Group C 🟡</button>
        </div>
        <h3 id="group-display-title" style="text-align: center; color: var(--secondary); margin-bottom: 15px; font-weight: bold; display: none;"></h3>
        <div id="daysArea" style="text-align:center; margin-bottom:20px;"></div>
        <div id="schedule-box" style="display:none;">
            <div class="table-container">
                <table style="border: 2px solid var(--table-border);">
                    <thead><tr><th id="lang-tbl-no">ژمارە</th><th id="lang-tbl-sub">بابەت</th><th id="lang-tbl-time">کات</th><th id="lang-tbl-teacher">مامۆستا</th></tr></thead>
                    <tbody id="schedule-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="semesters-tab" class="semester-content">
        <h2 style="text-align: center; color: var(--primary);" id="lang-choose-sem">هەڵبژاردنی سمستەر</h2>
        <div class="sem-grid">
            <div class="sem-card" style="background: linear-gradient(135deg, #3b82f6, #2563eb);" onclick="openInnerSem('sem1')"><span id="lang-card-sem1">📚 سمستەری یەکەم</span></div>
            <div class="sem-card" style="background: linear-gradient(135deg, #10b981, #059669);" onclick="openInnerSem('sem2')"><span id="lang-card-sem2">📚 سمستەری دووەم</span></div>
            <div class="sem-card" style="background: linear-gradient(135deg, #f59e0b, #d97706);" onclick="openInnerSem('sem3')"><span id="lang-card-sem3">📚 سمستەری سێیەم</span></div>
            <div class="sem-card" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);" onclick="openInnerSem('sem4')"><span id="lang-card-sem4">📚 سمستەری چوارەم</span></div>
        </div>
        <hr style="margin: 40px 0; border: 0; border-top: 1px solid var(--table-border);">
    
        <div id="sem1" class="inner-sem-content" style="display: none;">
            <h3 style="color: #3b82f6; border-right: 5px solid #3b82f6; padding-right: 10px; margin-bottom: 20px;">وانەکانی سمستەری یەکەم</h3>
            <div class="table-container">
                <table>
                    <thead><tr><th class="th-sub">ناوی وانە</th><th class="th-lec">مەلزەمە</th><th class="th-qs">پرسیار</th><th class="th-tut">فێركاری</th></tr></thead>
                    <tbody>
                        <tr><td><span class="subject-badge" style="background-color: #ef4444;">Logic Design</span></td><td><a href="https://drive.google.com/drive/folders/16v8Zf_xiCYPCkcPib7bIS_ah4hk6dDPj" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1w4lv3S1wskIFRmJzgrR3m_Vib2SzklOv" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYroYmhAU2fJR9nD8TqUjSy0" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                        <tr><td><span class="subject-badge" style="background-color: #10b981;">IT Fundamentals</span></td><td><a href="https://drive.google.com/drive/folders/1MUimiqD30yYTs1U53IVkb2B4lZn8Q5Dx" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1dqo6IA60wMPzrD-tpE92e_NPb1x9MlGY" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYrrG8eEF0VjVu5bctbCZfGf" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                        <tr><td><span class="subject-badge" style="background-color: #8b5cf6;">Mathematics</span></td><td><a href="https://drive.google.com/drive/folders/15oJqsrWSfqplqdO2XPV88UmI0mpsK7Tv" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1txr0hJgSoTuRse6Zj7ARdxDWIPtjcI8C" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYoBgOnmKoAf1t8CqbS4dcQh" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                        <tr><td><span class="subject-badge" style="background-color: #f59e0b;">English</span></td><td><a href="https://drive.google.com/drive/folders/1D9DL2xHQRVJYSFlQB6BUDStWt_qKF0QI" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1s2q2r18eHAAwEwvagR2r0d0WjIR2_ZVe" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                        <tr><td><span class="subject-badge" style="background-color: #475569;">Kurdology</span></td><td><a href="https://drive.google.com/drive/folders/1zktjZlnocNqLwQIeJZ_S0jb4hhWgYc0C" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1SIpy883RCPN4cvpFy2TPx7ea5TZvcppM" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    
        <div id="sem2" class="inner-sem-content" style="display: none;">
            <h3 style="color: #10b981; border-right: 5px solid #10b981; padding-right: 10px; margin-bottom: 20px;">وانەکانی سمستەری دووەم</h3>
            <div class="table-container">
                <table>
                    <thead><tr><th class="th-sub">ناوی وانە</th><th class="th-lec">مەلزەمە</th><th class="th-qs">پرسیار</th><th class="th-tut">فێركاری</th></tr></thead>
             <tbody>
    <tr>
        <td><span class="subject-badge" style="background-color: #d97706;">Database</span></td>
        <td><a href="https://drive.google.com/drive/folders/1v1cPSMwNCzJ93P3if77aBSH3R6lQ6W46?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/1l7794MSA8kAzET6vRpqF9Jib8WYHgiT2?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYoX2N0FV_PztrRv0XIdcdNv" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
    <tr>
        <td><span class="subject-badge" style="background-color: #f59e0b;">English II</span></td>
        <td><a href="https://drive.google.com/drive/folders/1Se6yT_wi37QdwuHdhegGua9wgRCpRF4z?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/1gUhKAX-3B-RZQh64dq0OD86DzrKaPyoJ?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
    <tr>
        <td><span class="subject-badge" style="background-color: #3b82f6;">Network +</span></td>
        <td><a href="https://drive.google.com/drive/folders/1j5V28ybYfoILvt24CaTZ-2I9gFJ5BBN9?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/1JzjJsKXJGT55thGJ8443iUhhAutQ-N_-?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYpXCSfAQMICp80CLqmwJ9cz" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
    <tr>
        <td><span class="subject-badge" style="background-color: #8b5cf6;">Programming</span></td>
        <td><a href="https://drive.google.com/drive/folders/1efNtV9t40s2KTZ0HE9lv-PfLBw_ffnLS?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/1-ueA6PtmzqG0I9wVuYC6Et1xHtTexIqo?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYpXGWyI1Q9L1RpA7TB9ehff" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
    <tr>
        <td><span class="subject-badge" style="background-color: #14b8a6;">Web Design</span></td>
        <td><a href="https://drive.google.com/drive/folders/1hv6vYbnSv7Fj97013N__ZvK9_YxYcfHR?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/11P6uCba4gbgjxPta-X1In3SQwmRiH5v0?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYoPnzUh8Js1WYRLT4CJVnGU" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
</tbody>
                </table>
            </div>
        </div>
    
        <div id="sem3" class="inner-sem-content" style="display: none;">
            <h3 style="color: #f59e0b; border-right: 5px solid #f59e0b; padding-right: 10px; margin-bottom: 20px;">وانەکانی سمستەری سێیەم</h3>
            <div class="table-container">
                <table>
                    <thead><tr><th class="th-sub">ناوی وانە</th><th class="th-lec">مەلزەمە</th><th class="th-qs">پرسیار</th><th class="th-tut">فێركاری</th></tr></thead>
                    <tbody>
                        <tr><td><span class="subject-badge" style="background-color: #3b82f6;">Web Programming</span></td><td><a href="https://drive.google.com/drive/folders/1mekctNg5e-MAU4VkefN3iq8BW1MjwUEA?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1o70tb7NKoK9741gVkCwyHcMwxa9NqKFH?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                        <tr><td><span class="subject-badge" style="background-color: #8b5cf6;">O.O.P</span></td><td><a href="https://drive.google.com/drive/folders/1PHQsXnke2PKfy35DK6tgnVYj7K2p7qNo?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1QCAE0bDUqRjORprx4axrNerdJIGF7S5c?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                        <tr><td><span class="subject-badge" style="background-color: #d97706;">Database Management System</span></td><td><a href="https://drive.google.com/drive/folders/1xJHjWqgjWp5JzG94s_jvKbhCWfJhdzEP?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1sfpIGXqjqngCr185vx5QOR9ixd8m358X?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                        <tr><td><span class="subject-badge" style="background-color: #10b981;">Computer Network II</span></td><td><a href="https://drive.google.com/drive/folders/1qmPzOrQjZnEI2yNvqpsYrlyYY5T9xLRB?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1JTd-pifQa6H5EcQCbg5qoNRb3mFdPnNt?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                        <tr><td><span class="subject-badge" style="background-color: #ef4444;">Operating System</span></td><td><a href="https://drive.google.com/drive/folders/1m_0FH7YaqOxSAdU-TqdvTGXRLnwI9VQk?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td><td><a href="https://drive.google.com/drive/folders/1FoALIWCrtUdguIiRqmy2xKK7uxR4Ll91?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td><td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    
        <div id="sem4" class="inner-sem-content" style="display: none;">
            <h3 style="color: #8b5cf6; border-right: 5px solid #8b5cf6; padding-right: 10px; margin-bottom: 20px;">وانەکانی سمستەری چوارەم</h3>
            <div class="table-container">
                <table>
                    <thead><tr><th class="th-sub">ناوی وانە</th><th class="th-lec">مەلزەمە</th><th class="th-qs">پرسیار</th><th class="th-tut">فێركاری</th></tr></thead>
                 <tbody>
    <tr>
        <td><span class="subject-badge" style="background-color: #3b82f6;">Web Programming II</span></td>
        <td><a href="https://drive.google.com/drive/folders/1IgdmDDhxyqo-ffVZLPOmjP3EsvnvJcvN?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/14blSbrGSGQ8IZbwltXzqzcfTpvxXg5IM?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYpG4aEhqzT765YbgADOCWXP" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
    <tr>
        <td><span class="subject-badge" style="background-color: #8b5cf6;">Visual Programming</span></td>
        <td><a href="https://drive.google.com/drive/folders/1ZJHjX96VrhxRTmiCp9LbwHRr4mD-1zEY?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/12Tl6rr9mmahiq2NW_bNh-Azjf7EDumm_?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYo8UWKXmu4JTxXk4gu4OR1S" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
    <tr>
        <td><span class="subject-badge" style="background-color: #d97706;">Mobile Application</span></td>
        <td><a href="https://drive.google.com/drive/folders/1R2OtISaRNwrt1pKyJPhgabwym9NCsaoW?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/1_JJe1GThTefK_0eXA7uLaUB-JEVnD_Kc?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYovN2GQDUwGWNZ86MuysWHY" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
    <tr>
        <td><span class="subject-badge" style="background-color: #ef4444;">Information Security</span></td>
        <td><a href="https://drive.google.com/drive/folders/1JiRVkA6xWUH7srSV3Jx0WYMz0olLK5SL?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/1ZiZVlwgZA1SGVT0KCCPDupUKDzTKDt9-?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="https://www.youtube.com/playlist?list=PLCfnFVb0wrYo87aNgzIujs_Hu1hzXzz-X" target="_blank" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
    <tr>
        <td><span class="subject-badge" style="background-color: #10b981;">Project</span></td>
        <td><a href="https://drive.google.com/drive/folders/1I7qZiOCiyhunUMGWIQajF3U9JHAwyo8t?usp=drive_link" target="_blank" class="download-btn btn-dl">داگرتن</a></td>
        <td><a href="https://drive.google.com/drive/folders/1RL9vDTIBv1UWCNrnnHBp8_j7bBujPQ2F?usp=drive_link" target="_blank" class="download-btn old-btn btn-view">بینین</a></td>
        <td><a href="#" class="download-btn btn-vid" style="background-color: #ef4444;">🎥 ڤیدیۆ</a></td>
    </tr>
</tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="about-tab" class="semester-content">
        <div style="text-align: center;">
            <div style="width: 80px; height: 80px; background: var(--secondary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; font-size: 35px; box-shadow: 0 5px 15px rgba(5, 150, 105, 0.4);">ℹ️</div>
            <h2 style="color: var(--primary); font-weight:800;" id="lang-about-title">دەربارەی پڕۆژە</h2>
            <p id="lang-about-text" style="line-height: 1.8; text-align: justify; direction: rtl; font-size: 1.1rem;">
                ئەم پڕۆژەیە هەوڵێکی تایبەتە بۆ کۆکردنەوەی هەموو پێداویستییەکانی خوێندکارانی بەشی تەکنەلۆژیای زانیاری (IT) لە پەیمانگای تەکنیکی چەمچەماڵ. ئامانجی سەرەکی ئاسانکارییە بۆ گەیشتن بە زانیارییەکان بە خێراترین کات.
            </p>
            <hr style="border: 0; border-top: 1px solid rgba(0,0,0,0.1); margin: 30px 0;">
            <p><span id="lang-dev" style="opacity:0.7;">گەشەپێدەر:</span> <strong style="color:var(--secondary);">شیروان شێرزاد خالد</strong></p>
            <p><span id="lang-ver" style="opacity:0.7;">وەشان:</span> <span style="background:#0d9b7c; padding:2px 8px; border-radius:6px; font-size:0.9rem;">3.1.2 (٢٠٢٦)</span></p>
        </div>
    </div>

    <div class="extra-section" style="display: none;">
        <h3 style="color: var(--accent);">💬 سەرنج و تێبینیەكانتان لێرەوە بنێرن</h3>
        <div class="form-group"><textarea id="userMessage" rows="3" placeholder="نامەکەت لێرە بنووسە..."></textarea></div>
        <a href="#" onclick="sendToTelegram()" class="telegram-btn">ناردن لە ڕێگەی تێلەگرام ✈️</a>
    </div>

    <div style="margin: 20px auto; background: var(--white); padding: 15px; border-radius: 20px; max-width: 240px; display: flex; align-items: center; gap: 15px; border: 1px solid var(--table-border); box-shadow: 0 8px 20px rgba(0,0,0,0.05);">
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https://sherwansherzad25-max.github.io/it-chamchamal/&margin=0" style="width: 70px; height: 70px; border-radius: 12px; border: 1px solid #eee;">
        <div style="text-align: right;">
            <p id="lang-scan" style="font-size: 11px; color: var(--text-color); font-weight: bold; margin: 0; line-height: 1.6;">سکان بۆ هاوبەشکردن</p>
            <p style="font-size: 10px; color: var(--secondary); margin: 2px 0 0 0; font-weight: 600;">IT Chamchamal</p>
        </div>
    </div>
</div>

<footer>
    <div class="footer-watermark"></div>
    <p id="lang-created" style="opacity:0.8;">دروستکراوە لەلایەن خوێندکار:</p>
    <div class="rainbow-name">شیروان شێرزاد خالد</div>
    <span class="moving-text" id="lang-footer-hope">بە هیوای سود گەیاندن بە هەموو خوێندكارانی بەشی ئایتی</span>
    <p style="opacity:0.7; font-size:0.85rem; margin-top:15px;">© ٢٠٢٦ <span id="lang-copy">بەردەوام لە نوێ كردنەوەدایە</span></p>
    <div style="margin-top: 15px; padding-top:15px; border-top:1px solid rgba(255,255,255,0.1);">
        <p style="font-weight: 600; font-size: 0.9rem; margin-bottom:5px;" id="lang-visits">📊 ژمارەی سەردانەکان</p>
        <div id="visitor-counter" style="font-size:1.6rem;font-weight:800;color:#34d399;letter-spacing:4px;font-family:monospace;">0000000</div>
    </div>
</footer>

<script>

    function autoRequestNotification() {
        if (!("Notification" in window)) return;
        
        if (Notification.permission === "default") {
            setTimeout(() => {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        new Notification("IT Chamchamal", {
                            body: "ئێستا ئاگادارییەکان وەردەگریت",
                            icon: "it-icon-final-192.png"
                        });
                    }
                });
            }, 3000); 
        }
    }

    window.addEventListener('load', function() {
        autoRequestNotification(); 
     
        setTimeout(function() {
            var loader = document.getElementById('loading-screen');
            if(loader) {
                loader.classList.add('hidden');
                setTimeout(function(){ loader.style.display = 'none'; }, 500);
            }
        }, 1200);
        
     
        const savedGPASem = localStorage.getItem('gpa_selected_sem');
        if(savedGPASem) {
            document.getElementById('gpa-sem-select').value = savedGPASem;
            renderGrading(); 
        }
    });

    const TELEGRAM_USERNAME = "sherwan25"; 
    let currentSem = 1;
    let currentShift = 'evening'; 
    const APP_VERSION = "3.1"; 
    let currentLang = 'ku';

    const part1 = "patQX5Wtdj3DQUoQE.";
    const part2 = "5faea8c298e06cb2f4fc53212ed14edf61941262dca73610c116f3382b047893";
    const FINAL_TOKEN = part1 + part2;

    const subjectList = {
        1: ["Logic Design", "IT Fundamentals", "Mathematics", "English", "Kurdology"],
        2: ["Database", "English II", "Network +", "Programming", "Web Design"],
        3: ["Web Programming", "O.O.P", "Database Management", "Computer Network II", "Operating System"],
        4: ["Mobile Application", "Web Programming II", "Visual Programming", "Information Security", "Project"]
    };
    const subColors = {
        'Logic Design': '#ef4444', 'IT Fundamentals': '#10b981', 'Mathematics': '#8b5cf6', 'English': '#f59e0b', 'Kurdology': '#475569',
        'Database': '#d97706', 'English II': '#f59e0b', 'Network +': '#3b82f6', 'Programming': '#8b5cf6', 'Web Design': '#14b8a6',
        'Web Programming': '#3b82f6', 'O.O.P': '#8b5cf6', 'Database Management': '#d97706', 'Computer Network II': '#10b981', 'Operating System': '#ef4444',
        'Web Programming II': '#3b82f6', 'Visual Programming': '#8b5cf6', 'Mobile Application': '#d97706', 'Information Security': '#ef4444', 'Project': '#10b981'
    };
    
    const translations = {
        ku: {
            dept: "بەشی ئایتی", menu: "لیست", institute: "پەیمانگای تەکنیکی چەمچەماڵ", deptSub: "بەشی تەکنەلۆژیای زانیاری (IT)",
            home: "🏠 سەرەکی", schedule: "📅 خشتەی هەفتانە", semesters: "📚 سمستەرەکان", about: "ℹ️ دەربارە", contact: "📞 پەیوەندی (Telegram)",
            setting: "زمان", alert: "🚨 ئاگاداری گرنگ",
            welcomeTitle: "بەخێربێن خوێندکارانی ئازیزی بەشی تەکنەلۆژیای زانیاری (IT)",
            welcomeText: "ئەم وێبسایتە دروستکراوە بۆ ئەوەی تۆی خوێندکار لێی سوودمەند بیت و کارئاسانییەک بێت بۆ خوێندنی وانەکانی ڕۆژانەت بە كرتە كردن لەسەر \" لیست \" كە لە راستی بەشی سەرەوەی ویب سایتەكەدایە ئەم زانیاراینەی لای خوارەوەی تێدایە .",
            semTitle: "بەشی سمستەرەکان:", semDesc1: "١. بە کرتە کردن لەسەر مەلزەمەکان، هەموو مەلزەمەکانی وانەکەت دەست دەکەوێت.",
            semDesc2: "٢. بە کرتە کردن لەسەر بەشی پرسیار، پرسیاری ساڵانی ڕابردووت دەست دەکەوێت بۆ بەرچاوڕوونی خوێندکار.",
            semDesc3: "٣. بە کرتە کردن لەسەر بەشی فێرکاری، دەتباتە ناو پلەی لیستی یوتیوب و فێرکاری ئەو بابەتە.",
            schTitle: "بەشی خشتەی هەفتانە:", schDesc: "خشتەی وانەکانی ڕۆژانەی هەردوو دەوامی بەیانیان و ئێوارنی تێدایە بۆ هەردوو گرووپ  بەشێوەیەکی زۆر جوان ڕوونکراوەتەوە.",
            wish: "بەهیوای سەرکەوتن بۆ هەموو خوێندکاران", thanks: "سوپاس بۆ هەردوو خوێندکار", and: "و", helpers: "کە هاوکار بوون لە دروستکردنی ئەم وێبسایتەدا",
            schedHeader: "📅 خشتەی هەفتانە (جەدۆل)", morning: "☀️ دەوامی بەیانیان", evening: "🌙 دەوامی ئێوارن",
            semBtn1: "سمستەری ١", semBtn2: "سمستەری ٢", semBtn3: "سمستەری ٣", semBtn4: "سمستەری ٤",
            tblNo: "ژمارە", tblSub: "بابەت", tblTime: "کات", tblTeacher: "مامۆستا",
            chooseSem: "هەڵبژاردنی سمستەر", cardSem1: "📚 سمستەری یەکەم", cardSem2: "📚 سمستەری دووەم", cardSem3: "📚 سمستەری سێیەم", cardSem4: "📚 سمستەری چوارەم",
            aboutTitle: "دەربارەی پڕۆژە", aboutText: "ئەم پڕۆژەیە هەوڵێکی تایبەتە بۆ کۆکردنەوەی هەموو پێداویستییەکانی خوێندکارانی بەشی تەکنەلۆژیای زانیاری (IT) لە پەیمانگای تەکنیکی چەمچەماڵ. ئامانجی سەرەکی ئاسانکارییە بۆ گەیشتن بە زانیارییەکان بە خێراترین کات.",
            dev: "گەشەپێدەر:", ver: "وەشان:", scan: "سکان بۆ هاوبەشکردن", created: "دروستکراوە لەلایەن خوێندکار:", footerHope: "بە هیوای سود گەیاندن بە هەموو خوێندكارانی بەشی ئایتی", copy: "بەردەوام لە نوێ كردنەوەدایە", visits: "📊 ژمارەی سەردانەکان",
            thSub: "ناوی وانە", thLec: "مەلزەمە", thQs: "پرسیار", thTut: "فێركاری", btnDl: "داگرتن", btnView: "بینین", btnVid: "🎥 ڤیدیۆ",
            menuExam: "⏳ کاتی تاقیکردنەوە", menuGpa: "🧮 هەژمارکردنی نمرە", examHeader: "⏳ کاتی ماوە بۆ تاقیکردنەوەکان", gpaHeader: "🧮 هەژمارکردنی نمرەکان"
        },
        en: {
            dept: "IT Department", menu: "Menu", institute: "Chamchamal Technical Institute", deptSub: "Information Technology (IT) Dept.",
            home: "🏠 Home", schedule: "📅 Weekly Schedule", semesters: "📚 Semesters", about: "ℹ️ About", contact: "📞 Contact (Telegram)", setting: "Language", alert: "🚨 Important Notice",
            welcomeTitle: "Welcome dear students of Information Technology (IT)",
            welcomeText: "This website is designed to assist you in your daily studies. By clicking 'Menu' on the top right, you can access:",
            semTitle: "Semesters Section:", semDesc1: "1. Click on Lecture Notes to download course materials.",
            semDesc2: "2. Click on Questions to see past year exam questions.", semDesc3: "3. Click on Tutorials to watch YouTube playlists for subjects.",
            schTitle: "Weekly Schedule:", schDesc: "Contains daily schedules for both Morning and Evening shifts, clearly organized for both groups.",
            wish: "Wishing success to all students", thanks: "Special thanks to students", and: "and", helpers: "for their assistance in creating this website",
            schedHeader: "📅 Weekly Schedule", morning: "☀️ Morning Shift", evening: "🌙 Evening Shift",
            semBtn1: "Semester 1", semBtn2: "Semester 2", semBtn3: "Semester 3", semBtn4: "Semester 4",
            tblNo: "No", tblSub: "Subject", tblTime: "Time", tblTeacher: "Teacher",
            chooseSem: "Select Semester", cardSem1: "📚 Semester 1", cardSem2: "📚 Semester 2", cardSem3: "📚 Semester 3", cardSem4: "📚 Semester 4",
            aboutTitle: "About Project", aboutText: "This project is a dedicated effort to gather all study resources for IT students at Chamchamal Technical Institute. The main goal is to provide quick access to information.",
            dev: "Developer:", ver: "Version:", scan: "Scan to Share", created: "Created by student:", footerHope: "Hoping to benefit all IT students", copy: "Continuously updated", visits: "📊 Total Visits",
            thSub: "Subject", thLec: "Notes", thQs: "Questions", thTut: "Tutorials", btnDl: "Download", btnView: "View", btnVid: "🎥 Video",
            menuExam: "⏳ Exam Timer", menuGpa: "🧮 GPA Calculator", examHeader: "⏳ Time Remaining for Exams", gpaHeader: "🧮 Grade Calculation"
        }
    };

    function toggleLanguage(lang) {
        currentLang = lang;
        const t = translations[lang];
        const t2 = (lang === 'en') ? translations['ku'] : translations['en']; 
        if (lang === 'en') { document.body.classList.add('lang-en'); document.documentElement.dir = "ltr"; } 
        else { document.body.classList.remove('lang-en'); document.documentElement.dir = "rtl"; }
        const map = {
            'lang-dept': t.dept, 'lang-menu': t.menu, 'lang-institute': t.institute, 'lang-dept-sub': t.deptSub,
            'lang-home': t.home, 'lang-schedule': t.schedule, 'lang-semesters': t.semesters, 'lang-about': t.about, 'lang-contact': t.contact,
            'lang-setting': t.setting, 'lang-alert': t.alert, 'lang-tab-home': t.home, 'lang-tab-schedule': t.schedule, 'lang-tab-semesters': t.semesters, 'lang-tab-about': t.about,
            'lang-welcome-title': t.welcomeTitle, 
            'lang-welcome-text': t.welcomeText.replace('" لیست "', '<span class="highlight-menu-word">" لیست "</span>').replace('"Menu"', '<span class="highlight-menu-word">"Menu"</span>'),
            'lang-sem-title': t.semTitle, 'lang-sem-desc1': t.semDesc1, 'lang-sem-desc2': t.semDesc2, 'lang-sem-desc3': t.semDesc3,
            'lang-sch-title': t.schTitle, 'lang-sch-desc': t.schDesc, 'lang-wish': t.wish, 'lang-thanks': t.thanks, 'lang-and': t.and, 'lang-helpers': t.helpers,
            'lang-sched-header': t.schedHeader, 'lang-morning': t.morning, 'lang-evening': t.evening,
            'lang-sem-btn1': t.semBtn1, 'lang-sem-btn2': t.semBtn2, 'lang-sem-btn3': t.semBtn3, 'lang-sem-btn4': t.semBtn4,
            'lang-tbl-no': t.tblNo, 'lang-tbl-sub': t.tblSub, 'lang-tbl-time': t.tblTime, 'lang-tbl-teacher': t.tblTeacher,
            'lang-choose-sem': t.chooseSem, 'lang-card-sem1': t.cardSem1, 'lang-card-sem2': t.cardSem2, 'lang-card-sem3': t.cardSem3, 'lang-card-sem4': t.cardSem4,
            'lang-about-title': t.aboutTitle, 'lang-about-text': t.aboutText, 'lang-dev': t.dev, 'lang-ver': t.ver, 'lang-scan': t.scan,
            'lang-created': t.created, 'lang-footer-hope': t.footerHope, 'lang-copy': t.copy, 'lang-visits': t.visits,
            'lang-menu-exam': t.menuExam, 'lang-menu-gpa': t.menuGpa, 'lang-exam-header': t.examHeader, 'lang-gpa-header': t.gpaHeader
        };
        for (let id in map) { let el = document.getElementById(id); if (el) { if(id === 'lang-welcome-text') { el.innerHTML = map[id]; } else { el.innerText = map[id]; } } }
        document.querySelectorAll('.th-sub').forEach(e => e.innerText = t.thSub); document.querySelectorAll('.th-lec').forEach(e => e.innerText = t.thLec);
        document.querySelectorAll('.th-qs').forEach(e => e.innerText = t.thQs); document.querySelectorAll('.th-tut').forEach(e => e.innerText = t.thTut);
        document.querySelectorAll('.btn-dl').forEach(e => e.innerText = t.btnDl); document.querySelectorAll('.btn-view').forEach(e => e.innerText = t.btnView);
        document.querySelectorAll('.btn-vid').forEach(e => e.innerText = t.btnVid);
        
       
        if(document.getElementById('group-display-title').style.display !== 'none') {
            
             document.getElementById('schedule-box').style.display = 'none';
             document.getElementById('daysArea').innerHTML = '';
             document.getElementById('group-display-title').innerHTML = '';
        }
        closeNav();
    }
    
    function toggleLangMenu() {
        const menu = document.getElementById('lang-options'); const arrow = document.getElementById('lang-arrow');
        if (menu.style.display === 'none') { menu.style.display = 'block'; arrow.style.transform = 'rotate(180deg)'; } 
        else { menu.style.display = 'none'; arrow.style.transform = 'rotate(0deg)'; }
    }

  
    function openNav() { 
        document.getElementById("mySidebar").style.width = "270px"; 
        document.getElementById("sidebarOverlay").style.display = "block"; 
        document.body.classList.add('sidebar-open'); 
    }
    function closeNav() { 
        document.getElementById("mySidebar").style.width = "0"; 
        document.getElementById("sidebarOverlay").style.display = "none"; 
        document.body.classList.remove('sidebar-open'); 
    }

    function showSection(id) {
        var i, content; content = document.getElementsByClassName("semester-content");
        for (i = 0; i < content.length; i++) { content[i].style.display = "none"; }
        document.getElementById(id).style.display = "block"; window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function checkUpdate() {
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.ready.then(reg => {
                reg.update();
            });
        }
    }

    if (localStorage.getItem("app_version") !== APP_VERSION) {
        localStorage.setItem("app_version", APP_VERSION);
        window.location.reload(true);
    }

    function sendToTelegram() { window.open(`https://t.me/${TELEGRAM_USERNAME}`, '_blank'); }

    function showTab(evt, id) {
        var i, content, tablinks; content = document.getElementsByClassName("semester-content");
        for (i = 0; i < content.length; i++) { content[i].style.display = "none"; }
        tablinks = document.getElementsByClassName("tab-btn");
        for (i = 0; i < tablinks.length; i++) { tablinks[i].classList.remove("active"); }
        document.getElementById(id).style.display = "block"; evt.currentTarget.classList.add("active");
    }

    function openInnerSem(semId) {
        let contents = document.getElementsByClassName("inner-sem-content");
        for (let i = 0; i < contents.length; i++) { contents[i].style.display = "none"; }
        document.getElementById(semId).style.display = "block"; document.getElementById(semId).scrollIntoView({ behavior: 'smooth' });
    }

    function cycleTheme() {
        const btn = document.getElementById('themeBtn'); let currentMode = localStorage.getItem('themeMode') || 'auto';
        if (currentMode === 'auto') setTheme('dark'); else if (currentMode === 'dark') setTheme('light'); else setTheme('auto');
    }

    function setTheme(mode) {
        const body = document.body; const btn = document.getElementById('themeBtn'); localStorage.setItem('themeMode', mode);
        if (mode === 'auto') {
            btn.textContent = "مۆدی ئۆتۆ 🤖"; const h = new Date().getHours();
            if (h >= 18 || h < 6) body.classList.add('dark-mode'); else body.classList.remove('dark-mode');
        } else if (mode === 'dark') { body.classList.add('dark-mode'); btn.textContent = "مۆدی شەو 🌙"; } 
        else { body.classList.remove('dark-mode'); btn.textContent = "مۆدی ڕۆژ ☀️"; }
    }

    function selectShift(shift) {
        currentShift = shift;
        const morningBtn = document.querySelector('.shift-btn.morning'); const eveningBtn = document.querySelector('.shift-btn.evening');
        if(morningBtn) morningBtn.classList.remove('active'); if(eveningBtn) eveningBtn.classList.remove('active');
        if(shift === 'morning') morningBtn?.classList.add('active'); else eveningBtn?.classList.add('active');
        document.getElementById('group-selection').style.display = 'none'; document.getElementById('group-display-title').style.display = 'none';
        document.getElementById('daysArea').innerHTML = ""; document.getElementById('schedule-box').style.display = 'none';
    }

    const scheduleData = {
        morning: { 
            2: { 
                'A': {
                    1: [["١", "Programming", "8:30", "م. هێشوو + هۆگر + ئاسۆ"], ["٢", "English II", "10:30", "م. خێڵان + بەرهەم"], ["٣", "Database", "12:30", "م. هەردی"]],
                    2: [["١", "Programming", "8:30", "م. هێشوو"], ["٢", "English II", "10:30", "م. خێڵان"], ["٣", "Database", "12:30", "م. هەردی"]],
                    3: [["١", "Network +", "8:30", "م. عومەر"], ["٢", "Web Design", "10:30", "م. مستەفا"]],
                    4: [["١", "Web Design", "8:30", "م. مستەفا+ئەمین+چیناز+نمە"], ["٢", "Network +", "10:30", "م. عومەر+گۆران+شیلان+یەحیا"]]
                }, 
                'B': {
                    1: [["١", "English II", "8:30", "م. خێڵان + بەرهەم"], ["٢", "Database", "10:30", "م. هەردی+ئەمین+هاوژین+نمە"], ["٣", "Programming", "12:30", "م. هێشوو + هۆگر + ئاسۆ"]],
                    2: [["١", "Database", "8:30", "م. هەردی"], ["٢", "Programming", "10:30", "م. هێشوو"], ["٣", "English II", "12:30", "م. خێڵان"]],
                    3: [["١", "Web Design", "8:30", "م. مستەفا"], ["٢", "Network +", "10:30", "م. عومەر"]],
                    4: [["١", "Web Design", "10:30", "م. مستەفا+ئەمین+چیناز+نمە"], ["٢", "Network +", "12:30", "م. عومەر+گۆران+شیلان+یەحیا"]]
                },
                'C': {
                    1: [["١", "Database", "8:30", "م. هەردی+ئەمین+هاوژین+نمە"], ["٢", "Programming", "10:30", "م. هێشوو + هۆگر + ئاسۆ"], ["٣", "English II", "12:30", "م. خێڵان + بەرهەم"]],
                    2: [], 3: [],
                    4: [["١", "Network +", "8:30", "م. عومەر+گۆران+شیلان+یەحیا"], ["٢", "Web Design", "12:30", "م. مستەفا+ئەمین+چیناز+نمە"]]
                }
            }, 
            4: { 
                'A': {
                    1: [["١", "Web Programming II", "8:30", "م. زانیار"], ["٢", "Visual Programming", "10:30", "م. علی"], ["٣", "Project", "12:30", "-"]],
                    2: [["١", "Web Programming II", "8:30", "م. زانیار+چیناز+گۆران+نمە"], ["٢", "Mobile Application", "10:30", "م. ڕێبین+سامان+ئەمین"], ["٣", "Visual Programming", "12:30", "م. علی+هۆگر+ئاسۆ"]],
                    3: [["١", "Project", "8:30", "-"], ["٢", "Project", "10:30", "-"]],
                    4: [["١", "Mobile Application", "8:30", "م. ڕێبین"], ["٢", "Information Security", "10:30", "م. هەڵۆ"]]
                }, 
                'B': {
                    1: [["١", "Visual Programming", "8:30", "م. علی"], ["٢", "Web Programming II", "10:30", "م. زانیار"], ["٣", "Project", "12:30", "-"]],
                    2: [["١", "Mobile Application", "8:30", "م. ڕێبین+سامان+ئەمین"], ["٢", "Visual Programming", "10:30", "م. علی+هۆگر+ئاسۆ"], ["٣", "Web Programming II", "12:30", "م. زانیار+گۆران+چیناز+نمە"]],
                    3: [["١", "Project", "8:30", "-"], ["٢", "Project", "10:30", "-"]],
                    4: [["١", "Information Security", "8:30", "م. هەڵۆ"], ["٢", "Mobile Application", "10:30", "م. ڕێبین"]]
                },
                'C': {
                    2: [["١", "Visual Programming", "8:30", "م. علی+هۆگر+ئاسۆ"], ["٢", "Web Programming II", "10:30", "م. زانیار+گۆران+چیناز+نمە"], ["٣", "Mobile Application", "12:30", "م. ڕێبین+سامان+ئەمین"]],
                    1: [], 3: [], 4: []
                }
            } 
        },
        evening: {
            1: {
                'A': { 1: [["١", "Logic Design", "2:00", "م. پشتیوان + هەڵكەوت"], ["٢", "English", "4:00", "م. بەرهەم"], ["٣", "IT Fundamentals", "6:00", "م.عمر+هۆگر+امین"]], 2: [["١", "Mathematics", "2:00", "م. سۆران"], ["٢", "Logic Design", "4:00", "م. پشتیوان"], ["٣", "IT Fundamentals", "6:00", "م. عمر"]], 3: [["١", "Kurdology", "2:00", "م. ڕێبین"], ["٢", "English", "4:00", "م. بەرهەم"], ["٣", "Kurdology", "6:00", "م. ڕێبین"]], 4: [["١", "IT Fundamentals", "2:00", "م. عمر"], ["٢", "IT Fundamentals", "4:00", "م. عمر+امین+هۆگر"]] },
                'B': { 1: [["١", "English", "2:00", "م. بەرهەم"], ["٢", "Logic Design", "4:00", "م. پشتیوان+هەڵكەوت"], ["٣", "IT Fundamentals", "6:00", "م.عمر+هۆگر+امین"]], 2: [["١", "Logic Design", "2:00", "م. پشتیوان"], ["٢", "Mathematics", "4:00", "م. سۆران"], ["٣", "IT Fundamentals", "6:00", "م. عمر"]], 3: [["١", "English", "2:00", "م. بەرهەم"], ["٢", "Kurdology", "4:00", "م. ڕێبین"], ["٣", "Kurdology", "6:00", "م. ڕێبین"]], 4: [["١", "IT Fundamentals", "2:00", "م. عمر"], ["٢", "IT Fundamentals", "4:00", "م. عمر+امین+هۆگر"]] }
            },
            2: {
                'A': {
                    1: [["١", "Programming", "2:00", "م. هێشوو + هۆگر + امین"], ["٢", "English", "4:00", "م. بەرهەم + خێڵان"], ["٣", "Network +", "6:00", "م.عمر"]],
                    2: [["١", "Programming", "2:00", "م. هێشوو"], ["٢", "English", "4:00", "م. بەرهەم + خێڵان"]],
                    3: [["١", "Network +", "2:00", "م. عمر + گۆران + شیلان"], ["٢", "Web Design", "4:00", "م. مستەفا + امین + چیناز"], ["٣", "Database", "6:00", "م. هەردی + امین + سامان"]],
                    4: [["١", "Database", "2:00", "م. هەردی"], ["٢", "Web Design", "4:00", "م. مستەفا"]]
                },
                'B': {
                    1: [["١", "English", "2:00", "م. بەرهەم + خێڵان"], ["٢", "Programming", "4:00", "م. هێشوو + هۆگر + امین"]],
                    2: [["١", "English", "2:00", "م. بەرهەم + خێڵان"], ["٢", "Programming", "4:00", "م. هێشوو"], ["٣", "Network +", "6:00", "م. عمر"]],
                    3: [["١", "Web Design", "2:00", "م. مستەفا + امین+ چیناز"], ["٢", "Network +", "4:00", "م. عمر + گۆران + شیلان"]],
                    4: [["١", "Web Design", "2:00", "م. مستەفا"], ["٢", "Database", "4:00", "م. هەردی"], ["٣", "Database", "6:00", "م. هەردی + امین + سامان"]]
                }
            },
            3: {
                'A': { 1: [["١", "Web Programming", "2:00", "م. زانیار"], ["٢", "O.O.P", "4:00", "م. علی"]], 2: [["١", "Database Management", "2:00", "م. محمد + امین"], ["٢", "Web Programming", "4:00", "م. زانیار + گۆران"]], 3: [["١", "Database", "2:00", "م. محمد"], ["٢", "O.O.P", "4:00", "م. علی + هۆگر + سامان"]], 4: [["١", "Operating System", "2:00", "م. ڕێبین"], ["٢", "Computer Network II", "4:00", "م. هەڵۆ"]] },
                'B': { 1: [["١", "Web Programming", "2:00", "م. زانیار"], ["٢", "O.O.P", "4:00", "م. علی"]], 2: [["١", "Database Management", "2:00", "م. محمد + امین"], ["٢", "Web Programming", "4:00", "م. زانیار + گۆران"]], 3: [["١", "Database", "2:00", "م. محمد"], ["٢", "O.O.P", "4:00", "م. علی + هۆگر + سامان"]], 4: [["١", "Operating System", "2:00", "م. ڕێبین"], ["٢", "Computer Network II", "4:00", "م. هەڵۆ"]] }
            },
            4: {
                'A': {
                    1: [["١", "Web Programming II", "2:00", "م. زانیار"], ["٢", "Visual Programming", "4:00", "م. علی"]],
                    2: [["١", "Mobile Application", "2:00", "م. ڕێبین+سامان+ئەمین"], ["٢", "Visual Programming", "4:00", "م. علی+هۆگر+نمە"], ["٣", "Web Programming II", "6:00", "م. زانیار+گۆران+چیناز"]],
                    3: [["١", "Project", "2:00", "-"], ["٢", "Project", "4:00", "-"]],
                    4: [["١", "Mobile Application", "2:00", "م. ڕێبین"], ["٢", "Information Security", "4:00", "م. هەڵۆ"]]
                },
                'B': {
                    1: [["١", "Web Programming II", "2:00", "م. زانیار"], ["٢", "Visual Programming", "4:00", "م. علی"]],
                    2: [["١", "Web Programming II", "2:00", "م. زانیار+گۆران+چیناز"], ["٢", "Mobile Application", "4:00", "م. ڕێبین+سامان+ئەمین"], ["٣", "Visual Programming", "6:00", "م. علی+هۆگر+نمە"]],
                    3: [["١", "Project", "2:00", "-"], ["٢", "Project", "4:00", "-"]],
                    4: [["١", "Mobile Application", "2:00", "م. ڕێبین"], ["٢", "Information Security", "4:00", "م. هەڵۆ"]]
                }
            }
        }
    };

    function setSem(s) {
        currentSem = s;
        
      
        document.querySelectorAll('.sem-btn').forEach(btn => btn.classList.remove('active-btn'));
        const activeBtn = document.getElementById('btn-sem-' + s);
        if(activeBtn) activeBtn.classList.add('active-btn');

      
        document.getElementById('group-selection').style.display = 'flex';
        document.getElementById('group-display-title').style.display = 'block';
        
   
        const btnC = document.getElementById('btn-grp-C');
        if (currentShift === 'morning' && (currentSem === 2 || currentSem === 4)) {
            if(btnC) btnC.style.display = 'inline-block';
        } else {
            if(btnC) btnC.style.display = 'none';
        }

     
        const shiftText = currentShift === 'morning' ? (currentLang === 'en' ? 'Morning' : 'بەیانیان') : (currentLang === 'en' ? 'Evening' : 'ئێوارن');
      
        document.getElementById('group-display-title').innerHTML = `${translations[currentLang].semBtn1.replace('١','').replace('1','')} ${s} - ${shiftText} - <span style="color:#f59e0b">${currentLang === 'en' ? 'Select Group' : 'گروپ هەڵبژێرە'}</span>`;
        
       
        document.querySelectorAll('.grp-btn').forEach(btn => btn.classList.remove('active-btn'));
        
    
        document.getElementById('daysArea').innerHTML = ""; 
        document.getElementById('schedule-box').style.display = 'none';
    }

    function selectGroup(g) {
        let color = '#3b82f6';
        if (g === 'B') color = '#10b981';
        if (g === 'C') color = '#d97706';
        
     
        document.querySelectorAll('.grp-btn').forEach(btn => btn.classList.remove('active-btn'));
        const activeGrp = document.getElementById('btn-grp-' + g);
        if(activeGrp) activeGrp.classList.add('active-btn');

      
        const shiftText = currentShift === 'morning' ? (currentLang === 'en' ? 'Morning' : 'بەیانیان') : (currentLang === 'en' ? 'Evening' : 'ئێوارن');
   
        document.getElementById('group-display-title').innerHTML = `${translations[currentLang].semBtn1.replace('١','').replace('1','')} ${currentSem} - ${shiftText} - <span style="color:${color}">Group ${g}</span>`;
        
        const dayNames = currentLang === 'en' ? ['Sunday', 'Monday', 'Tuesday', 'Wednesday'] : ['یەکشەممە', 'دووشەممە', 'سێشەممە', 'چوارشەممە'];
        document.getElementById('daysArea').innerHTML = `
            <button class="tab-btn" style="background:#8b5cf6; color:white; margin:2px;" onclick="selectDay('${g}', 1, '${dayNames[0]}')">${dayNames[0]}</button>
            <button class="tab-btn" style="background:#3b82f6; color:white; margin:2px;" onclick="selectDay('${g}', 2, '${dayNames[1]}')">${dayNames[1]}</button>
            <button class="tab-btn" style="background:#10b981; color:white; margin:2px;" onclick="selectDay('${g}', 3, '${dayNames[2]}')">${dayNames[2]}</button>
            <button class="tab-btn" style="background:#d97706; color:white; margin:2px;" onclick="selectDay('${g}', 4, '${dayNames[3]}')">${dayNames[3]}</button>`;
    }

    function selectDay(g, d, dayName) {
        const body = document.getElementById('schedule-body'); if (!body) return; body.innerHTML = '';
        let color = '#3b82f6';
        if (g === 'B') color = '#10b981';
        if (g === 'C') color = '#d97706';
        
        const shiftText = currentShift === 'morning' ? (currentLang === 'en' ? 'Morning' : 'بەیانیان') : (currentLang === 'en' ? 'Evening' : 'ئێوارن');
        document.getElementById('group-display-title').innerHTML = `${translations[currentLang].semBtn1.replace('١','').replace('1','')} ${currentSem} - ${shiftText} - <span style="color:${color}">Group ${g}</span> - ${dayName}`;
        const subjectColors = { 'Logic Design': '#ef4444', 'English': '#f59e0b', 'IT Fundamentals': '#10b981', 'Mathematics': '#8b5cf6', 'Kurdology': '#475569', 'Web Programming': '#3b82f6', 'O.O.P': '#8b5cf6', 'Database Management': '#d97706', 'Database': '#d97706', 'Operating System': '#ef4444', 'Computer Network II': '#10b981', 'English II': '#f59e0b', 'Network +': '#3b82f6', 'Programming': '#8b5cf6', 'Web Design': '#14b8a6', 'Web Programming II': '#3b82f6', 'Visual Programming': '#8b5cf6', 'Mobile Application': '#d97706', 'Information Security': '#ef4444', 'Project': '#10b981' };
        
        if (scheduleData[currentShift] && scheduleData[currentShift][currentSem] && scheduleData[currentShift][currentSem][g] && scheduleData[currentShift][currentSem][g][d]) {
            const lessons = scheduleData[currentShift][currentSem][g][d];
            if (lessons.length > 0) {
                lessons.forEach(r => {
                    const sColor = subjectColors[r[1]] || '#3b82f6'; 
                    body.innerHTML += `<tr><td style="font-weight:bold;">${r[0]}</td><td><span style="background-color: ${sColor}; color: white; padding: 5px 12px; border-radius: 20px; font-weight: bold; display: inline-block;">${r[1]}</span></td><td dir="ltr" style="font-weight: bold;">${r[2]}</td><td style="font-size: 0.9rem;">${r[3]}</td></tr>`;
                });
            } else {
                body.innerHTML = `<tr><td colspan="4">${g === 'C' ? 'گرووپی C وانەی نییە لەم ڕۆژانەدا' : 'وانە نییە / No Class'}</td></tr>`;
            }
            document.getElementById('schedule-box').style.display = 'block';
        } else { body.innerHTML = '<tr><td colspan="4">زانیاری نییە / No Info</td></tr>'; document.getElementById('schedule-box').style.display = 'block'; }
    }

    function requestNotifyPermission() {
        if (!('Notification' in window)) { alert("مۆبایلەکەت پشتگیری نۆتیفیکەیشن ناکات"); return; }
        Notification.requestPermission().then(permission => {
            if (permission === "granted") { 
                new Notification("سەرکەوتوو بوو!", { body: "ئێستا ئاگادارییەکانت پێ دەگات", icon: "it-icon-final-192.png" }); 
            } else { alert("تکایە لە ڕێکخستنەکان ڕێگە بە نۆتیفیکەیشن بدە."); }
        });
    }

   async function fetchNews() {
        const newsContainer = document.getElementById('news-list'); 
        if (!newsContainer) return;
        
        try {
            const response = await fetch("https://api.airtable.com/v0/app1z1PS8UVTsQr6D/tblBouRY2UudRiook", { 
                headers: { "Authorization": "Bearer " + FINAL_TOKEN, "Content-Type": "application/json" }, 
                cache: "no-store" 
            });
            const data = await response.json();
            
            if (data.records && data.records.length > 0) {
                const latestNews = data.records[0].fields.Title;
                const storedNews = localStorage.getItem('last_news_title');
                
                if (storedNews !== latestNews && Notification.permission === "granted") {
                    if ('serviceWorker' in navigator) {
                        navigator.serviceWorker.ready.then(function(registration) {
                            registration.showNotification("ئاگاداری نوێ | IT", {
                                body: latestNews,
                                icon: "it-icon-final-192.png",
                                vibrate: [200, 100, 200],
                                tag: 'news-alert' 
                            });
                        });
                    } else {
                        new Notification("ئاگاداری نوێ | IT", { body: latestNews, icon: "it-icon-final-192.png" });
                    }
                    localStorage.setItem('last_news_title', latestNews);
                } 
                else if (!storedNews) { 
                    localStorage.setItem('last_news_title', latestNews); 
                }

                let html = "";
                data.records.forEach(r => { 
                    const t = r.fields.Title || ""; 
                    const d = r.fields.Details || ""; 
                    html += ` <span style="margin-left:100px; display:inline-block;"> <b>• ${t}</b> : ${d} </span> `; 
                });
                newsContainer.innerHTML = html + html;
            }
        } catch (e) { console.error("News Error:", e); }
    }

    setInterval(fetchNews, 15000);

    let examIntervals = [];
    async function checkExams() {
        const container = document.getElementById('exams-container');
        try {
            const r = await fetch("https://api.airtable.com/v0/app1z1PS8UVTsQr6D/Exams", { headers: { "Authorization": "Bearer " + FINAL_TOKEN }, cache: "no-store" });
            const d = await r.json();
            examIntervals.forEach(clearInterval); examIntervals = []; container.innerHTML = "";
            let activeExams = [];
            if (d.records && d.records.length > 0) {
                d.records.forEach(rec => {
                    if (rec.fields.Date) {
                        const exDate = new Date(rec.fields.Date);
                        if (exDate > new Date()) { activeExams.push({ ...rec.fields, dateObj: exDate }); }
                    }
                });
            }
            activeExams.sort((a, b) => a.dateObj - b.dateObj);
            if (activeExams.length > 0) {
                activeExams.forEach(exam => {
                    const divId = "timer-" + Math.random().toString(36).substr(2, 9);
                    container.innerHTML += `
                    <div class="countdown-box">
                        <h2 style="margin:0; font-size:1.1rem; color:#fcd34d;">${exam.Title}</h2>
                        <p style="margin:5px 0 10px; opacity:0.9; font-size:0.8rem; color:#e0f2fe;">${exam.dateObj.toLocaleString('ku-IQ')}</p>
                        <div class="timer-row">
                            <div class="timer-unit"><div class="timer-box" id="d-${divId}">00</div><div class="timer-label">ڕۆژ</div></div>
                            <div class="timer-unit"><div class="timer-box" id="h-${divId}">00</div><div class="timer-label">کاژێر</div></div>
                            <div class="timer-unit"><div class="timer-box" id="m-${divId}">00</div><div class="timer-label">خولەک</div></div>
                            <div class="timer-unit"><div class="timer-box" id="s-${divId}">00</div><div class="timer-label">چرکە</div></div>
                        </div>
                    </div>`;
                    startSpecificTimer(exam.dateObj, divId);
                });
            } else { container.innerHTML = "<h3 style='text-align:center; opacity:0.6; color:var(--text-color);'>هیچ تاقیکردنەوەیەک نییە</h3>"; }
        } catch(e) { console.error(e); }
    }

    function startSpecificTimer(date, id) {
        const int = setInterval(() => {
            const now = new Date().getTime(); const dist = date.getTime() - now;
            if (dist < 0) { clearInterval(int); return; }
            const d = Math.floor(dist / (1000 * 60 * 60 * 24));
            const h = Math.floor((dist % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((dist % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((dist % (1000 * 60)) / 1000);
            if (document.getElementById(`d-${id}`)) {
                document.getElementById(`d-${id}`).innerText = d < 10 ? "0" + d : d;
                document.getElementById(`h-${id}`).innerText = h < 10 ? "0" + h : h;
                document.getElementById(`m-${id}`).innerText = m < 10 ? "0" + m : m;
                document.getElementById(`s-${id}`).innerText = s < 10 ? "0" + s : s;
            }
        }, 1000);
        examIntervals.push(int);
    }

  
    function renderGrading() {
        const sem = document.getElementById('gpa-sem-select').value; 
        const subjects = subjectList[sem] || [];
        
       
        localStorage.setItem('gpa_selected_sem', sem);

        const container = document.getElementById('grading-container'); container.innerHTML = "";
        
        subjects.forEach((sub, idx) => {
            const color = subColors[sub] || '#3b82f6';
            container.innerHTML += `
            <div class="grade-item">
                <button class="accordion" onclick="toggleAccordion(this)">
                    <span class="subject-badge" style="background-color:${color};">${sub}</span>
                    <span id="score-${sem}-${idx}" style="font-size:0.8rem; opacity:0.6;">▼</span>
                </button>
                <div class="panel">
                    <div class="gpa-input-row"><label>ڕۆژانە</label><input type="number" min="0" max="50" id="daily-${sem}-${idx}" oninput="calcSub('${sem}', ${idx})"></div>
                    <div class="gpa-input-row"><label>نەهاتن</label><input type="number" min="0" max="50" id="attend-${sem}-${idx}" oninput="calcSub('${sem}', ${idx})"></div>
                    <div class="gpa-input-row"><label>کویز</label><input type="number" min="0" max="50" id="quiz-${sem}-${idx}" oninput="calcSub('${sem}', ${idx})"></div>
                    <div class="gpa-input-row"><label>ڕاپۆرت و سیمینار</label><input type="number" min="0" max="50" id="report-${sem}-${idx}" oninput="calcSub('${sem}', ${idx})"></div>
                    <div class="gpa-input-row"><label>میدتێرم</label><input type="number" min="0" max="50" id="mid-${sem}-${idx}" oninput="calcSub('${sem}', ${idx})"></div>
                    <div class="gpa-input-row" style="border-top:1px solid #eee;"><label style="color:${color}; font-weight:bold;">فایناڵ</label><input type="number" min="0" max="50" id="final-${sem}-${idx}" oninput="calcSub('${sem}', ${idx})"></div>
                    <div id="status-${sem}-${idx}" style="text-align:center; padding:12px; font-size:0.9rem; font-weight:bold; color:#64748b; background:#f8fafc; margin-top:8px; border-radius:12px; line-height:1.6; border:1px solid #e2e8f0;">تکایە نمرەکانت داخڵ بکە...</div>
                    <div class="clear-btns-container"><button class="btn-clear-sub" onclick="clearSubject('${sem}', ${idx})">🗑️ سڕینەوەی ئەم بابەتە</button></div>
                </div>
            </div>`;
        });
        loadGrades();
    }
    
    function toggleAccordion(btn) { btn.classList.toggle("active-accordion"); var panel = btn.nextElementSibling; panel.style.maxHeight = panel.style.maxHeight ? null : panel.scrollHeight + "px"; }
    
    function calcSub(sem, idx) {
        const getVal = (id) => { const el = document.getElementById(id); let v = el.value; if (v === "") return null; if (v < 0) { el.value = 0; return 0; } return parseFloat(v); };
        
        const d = getVal(`daily-${sem}-${idx}`); 
        const a = getVal(`attend-${sem}-${idx}`); 
        const q = getVal(`quiz-${sem}-${idx}`);
        const r = getVal(`report-${sem}-${idx}`); 
        const m = getVal(`mid-${sem}-${idx}`); 
        const f = getVal(`final-${sem}-${idx}`);
        
        let currentScore = 0;
        if (d !== null) currentScore += d; if (a !== null) currentScore += a; if (q !== null) currentScore += q;
        if (r !== null) currentScore += r; if (m !== null) currentScore += m;
        
        let msg = "";
        
       
        if (currentScore > 50) { 
            msg = "<b style='color:#ef4444'>هەڵە! کۆی سەعی نابێت لە ٥٠ زیاتر بێت. دڵنیابەرەوە لە نمرەکان.</b>"; 
        } 
        else if (f !== null && f > 50) {
            msg = "<b style='color:#ef4444'>هەڵە! نمرەی فایناڵ نابێت لە ٥٠ زیاتر بێت.</b>";
        }
        else {
            msg = `<div style="margin-bottom:5px;">کۆی سەعی (بێ فایناڵ): <span style="color:#0284c7; font-size:1.1rem;">${currentScore}</span></div>`;
            
        
            let missing = [];
            if (d === null) missing.push("ڕۆژانە");
            if (a === null) missing.push("نەهاتن"); 
            if (q === null) missing.push("کویز");
            if (r === null) missing.push("ڕاپۆرت و سیمینار");
            if (m === null) missing.push("میدتێرم");

            
            if (missing.length > 0 && currentScore < 50) {
                 msg += `<div style="color:#d97706; font-size:0.85rem; margin-top:5px; margin-bottom:5px; line-height:1.6; font-weight:bold;">💡 هەوڵبدە لە (${missing.join(' و ')}) نمرە بەدەست بهێنیت، بۆ ئەوەی بۆ فایناڵ بتوانیت نمرەت زۆر بەرز بكەیتەوە.</div>`;
            }
            
          
            if (currentScore < 25) {
                msg += `<br><span style="color:#ef4444; font-weight:900;">⚠️ مەترسی! نمرەی سەعیت زۆر کەمە. دەبێت لە فایناڵ هەموو هەوڵێک بدەیت تاوەکو دەربچیت.</span>`;
            } else if (currentScore >= 25 && currentScore < 35) {
                msg += `<br><span style="color:#d97706;">باشە، بەڵام هێشتا مەترسی هەیە.</span>`;
            } else if (currentScore >= 35 && currentScore < 50) {
                msg += `<br><span style="color:#059669; font-weight:bold;">🌟 ئاستت زۆر نایابە! تۆ تەنها بۆ دەرچوون هەوڵ مەدە، بەڵکو بجەنگە بۆ ئەوەی بەرزترین نمرە بهێنیت.</span>`;
            } else if (currentScore === 50) {
                msg += `<br><span style="color:#10b981; font-weight:bold;">🏆 سەعی تەواو! نایابە، ئێستا تەنها فایناڵ ماوە بۆ نمرەی ١٠٠.</span>`;
            }

           
            if (f !== null) {
                let finalScore = currentScore + f;
                msg = `<div style="margin-bottom:5px; font-size:1.1rem;">کۆی گشتی: <span style="color:#1e293b; font-weight:900;">${finalScore}</span></div>`;
                if (finalScore > 100) {
                     msg += `<span style="color:#ef4444">هەڵە! نمرە لە ١٠٠ تێپەڕی کرد.</span>`;
                } else if (finalScore >= 50) {
                     msg += `<span style="color:#10b981">🎉 پیرۆزە دەرچوویت!</span>`;
                     if(finalScore >= 85) msg += ` <span style="color:#f59e0b">ئاستێکی بەرز!</span>`;
                } else {
                     msg += `<span style="color:#ef4444">😢 بەداخەوە کەوتویت.</span>`;
                }
            }
        }
        
        const statusDiv = document.getElementById(`status-${sem}-${idx}`); 
        statusDiv.innerHTML = msg;
        let panel = statusDiv.closest('.panel'); if(panel.style.maxHeight) { panel.style.maxHeight = panel.scrollHeight + "px"; }
        saveGrades();
    }

    function saveGrades() { 
        
        const inputs = document.querySelectorAll('#grading-container input'); 
        let data = JSON.parse(localStorage.getItem('it_chamchamal_grades') || '{}');
        inputs.forEach(i => data[i.id] = i.value); 
        localStorage.setItem('it_chamchamal_grades', JSON.stringify(data)); 
    }

    function loadGrades() { 
        const saved = JSON.parse(localStorage.getItem('it_chamchamal_grades') || '{}'); 
        if(saved) { 
            for(let id in saved) { 
                let el = document.getElementById(id); 
                if(el){ 
                    el.value = saved[id]; 
                    let parts = id.split('-'); 
                    if(parts.length >= 3) { calcSub(parts[1], parts[2]); } 
                } 
            } 
        } 
    } 

    function clearSubject(sem, idx) {
        if(confirm("دڵنیای لە سڕینەوەی نمرەکانی تەنها ئەم بابەتە؟")) {
            let data = JSON.parse(localStorage.getItem('it_chamchamal_grades') || '{}');
            const fields = ['daily', 'attend', 'quiz', 'report', 'mid', 'final'];
            fields.forEach(f => {
                let id = `${f}-${sem}-${idx}`;
                if(document.getElementById(id)) document.getElementById(id).value = "";
                delete data[id];
            });
            localStorage.setItem('it_chamchamal_grades', JSON.stringify(data));
            document.getElementById(`status-${sem}-${idx}`).innerHTML = "تکایە نمرەکانت داخڵ بکە...";
        }
    }

    function resetSemesterGrades() {
        const sem = document.getElementById('gpa-sem-select').value;
        if(confirm(`دڵنیای لە سڕینەوەی هەموو نمرەکانی سمستەری ${sem}؟ (نمرەکانی سمستەرەکانی تر دەمێننەوە)`)) {
            let data = JSON.parse(localStorage.getItem('it_chamchamal_grades') || '{}');
         
            Object.keys(data).forEach(key => {
                if(key.includes(`-${sem}-`)) {
                    delete data[key];
                }
            });
            localStorage.setItem('it_chamchamal_grades', JSON.stringify(data));
            renderGrading();
        }
    }

    async function initVisitorCounter() {
        try {
            const res = await fetch(`https://api.airtable.com/v0/app1z1PS8UVTsQr6D/tblBouRY2UudRiook/reccrgnulA1AiGx75`, { headers: { Authorization: `Bearer ${FINAL_TOKEN}` } });
            const data = await res.json(); let n = (data.fields.Visits || 0) + 1;
            document.getElementById('visitor-counter').textContent = String(n).padStart(7, '0');
            await fetch(`https://api.airtable.com/v0/app1z1PS8UVTsQr6D/tblBouRY2UudRiook/reccrgnulA1AiGx75`, { method: 'PATCH', headers: { Authorization: `Bearer ${FINAL_TOKEN}`, 'Content-Type': 'application/json' }, body: JSON.stringify({ fields: { "Visits": n } }) });
        } catch (e) { console.error("Counter Error:", e); }
    }

    function updateClock() {
        const now = new Date(); let hours = now.getHours(); const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0'); const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12; hours = hours ? hours : 12; 
        const clockElement = document.getElementById('liveClock'); if(clockElement) { clockElement.textContent = `${hours}:${minutes}:${seconds} ${ampm}`; }
    }

    window.onload = function() {
        fetchNews(); initVisitorCounter(); checkUpdate(); setTheme(localStorage.getItem('themeMode') || 'auto');
        checkExams(); renderGrading(); setInterval(updateClock, 1000); updateClock(); 
    };

    if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js').catch(err => console.log('SW Failed', err)); }
</script>
</body>
</html>
